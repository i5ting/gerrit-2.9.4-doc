<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Permission denied (publickey)</title>
<style>
body {
  margin: 1em auto;
  width: 900px;
}

#toctitle {
  margin-top: 0.5em;
  font-weight: bold;
}

h1, h2, h3, h4, h5, h6, #toctitle {
  color: #527bbd;
  font-family: sans-serif;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}

p {
  margin: 0.5em 0 0.5em 0;
}
li p {
  margin: 0.2em 0 0.2em 0;
}

.listingblock > .content {
  border: 2px solid silver;
  background: #ebebeb;
  margin-left: 2em;
  color: darkgreen;
  padding: 2px;
  overflow: auto;
}

.listingblock > .content pre {
  background: none;
  border: 0 solid silver;
  padding: 0 0 0 0;
}

dl dt {
  margin-top: 1em;
}

table.tableblock {
  border-collapse: collapse;
}

table.tableblock,
th.tableblock,
td.tableblock {
  border: 1px solid #EEE;
}
</style>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
</head>
<body class="article">
<div id="header">
<h1>Permission denied (publickey)</h1>
<span id="revnumber">version v2.9.4</span>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_test_ssh_authentication">Test SSH authentication</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>With this error message an SSH command to Gerrit is rejected if the
SSH authentication is not successful.</p>
</div>
<div class="paragraph">
<p>The <a href="http://en.wikipedia.org/wiki/Secure_Shell">SSH</a> protocol uses <a href="http://en.wikipedia.org/wiki/Public-key_cryptography">Public-key Cryptography</a> for authentication.
This means for a successful SSH authentication you need your private
SSH key and the corresponding public SSH key must be known to Gerrit.</p>
</div>
<div class="paragraph">
<p>If you are facing this problem, do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify that you are using the correct username for the SSH command
and that it is typed correctly (case sensitive). You can look up
your username in the Gerrit Web UI under <em>Settings</em> &#8594; <em>Profile</em>.</p>
</li>
<li>
<p>Verify that you have uploaded your public SSH key for your Gerrit
account. To do this go in the Gerrit Web UI to <em>Settings</em> &#8594;
<em>SSH Public Keys</em> and check that your public SSH key is there. If
your public SSH key is not there you have to upload it.</p>
</li>
<li>
<p>Verify that you are using the correct private SSH key. To find out
which private SSH key is used test the SSH authentication as
described below. From the trace you should see which private SSH
key is used.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_test_ssh_authentication">Test SSH authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To test the SSH authentication you can run the following SSH command.
This command will print out a detailed trace which is helpful to
analyze problems with the SSH authentication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  $ ssh -vv -p 29418 john.doe@git.example.com</pre>
</div>
</div>
<div class="paragraph">
<p>If the SSH authentication is successful you should find the following
lines in the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  ...

  debug1: Authentication succeeded (publickey).

  ...

  ****    Welcome to Gerrit Code Review    ****

  Hi John Doe, you have successfully connected over SSH.

  Unfortunately, interactive shells are disabled.
  To clone a hosted Git repository, use:

  git clone ssh://john.doe@git.example.com:29418/REPOSITORY_NAME.git

  ...</pre>
</div>
</div>
<hr style="
  height: 2px;
  color: silver;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
">
<div class="paragraph">
<p>Part of <a href="error-messages.html">Gerrit Error Messages</a></p>
</div>
<div style="position:absolute; right:20px; top:20px;">
<input type="text" id="docSearch" size="70" />
<button type="button" id="searchBox">Search</button>
<script type="text/javascript">
var f = function() {
  window.location = '../#/Documentation/' +
    encodeURIComponent(document.getElementById("docSearch").value);
}
document.getElementById("searchBox").onclick = f;
document.getElementById("docSearch").onkeypress = function(e) {
  if (13 == (e.keyCode ? e.keyCode : e.which)) {
    f();
  }
}
</script>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version v2.9.4<br>
</div>
</div>
</body>
</html>